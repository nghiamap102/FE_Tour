{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Tours-app\\\\src\\\\Components\\\\Static.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Doughnut } from 'react-chartjs-2';\nimport cookie from 'react-cookies';\nimport API, { endpoints } from '../Configs/API';\nimport $ from 'jquery';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ChartJS() {\n  _s();\n\n  const [list_booking, setList_booking] = useState([]);\n  const [chartData_year, setCharData_year] = useState([]);\n  const [count_ticket, setCount_ticket] = useState(0);\n  const [change_nor, setChange_nor] = useState(1);\n  const [change_precious, setChange_precious] = useState(1);\n  const [count_ticket_precious, setCount_ticket_precious] = useState(0);\n  const [defaults, setDefaul] = useState(0);\n  const [chartData_precious, setCharData_precious] = useState([]);\n  const [year, setYear] = useState([]);\n  const [month, setMonth] = useState([]);\n  const [precious, setPrecious] = useState([]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    const get_all_booking = async () => {\n      let res = await API.get(endpoints['all_booking'], {\n        headers: {\n          'Authorization': `Bearer ${cookie.load('access_token')}`\n        }\n      }, []);\n      setList_booking(res.data.results);\n    };\n\n    get_all_booking();\n    var date = new Date().getFullYear();\n    var ele = date - 9;\n    var month_resent = new Date().getMonth() + 1;\n\n    for (let i = ele; i <= date; i++) {\n      year.push(i);\n    }\n\n    for (let i = 1; i <= 12; i++) {\n      month.push(i);\n    }\n\n    for (let i = 1; i <= 4; i++) {\n      precious.push(i);\n    }\n\n    year.splice(10, 99);\n    month.splice(10, 99);\n    precious.splice(4, 99);\n\n    if (defaults == 0) {\n      if (month_resent < 10) {\n        get_static_year(`${date}-${0}${month_resent}`);\n      } else {\n        get_static_year(`${date}-${month_resent}`);\n      }\n    }\n  }, [change_precious, change_nor, def]);\n\n  const get_static_year = date => {\n    let get = async () => {\n      let res = await API.post(endpoints['static_year'], {\n        \"date\": date\n      }, {\n        headers: {\n          'Authorization': `Bearer ${cookie.load('access_token')}`\n        }\n      }, []);\n      setCharData_year(res.data.map((u, index) => count(u)));\n      setCount_ticket(res.data.length);\n      chartData_precious.push(res.data);\n    };\n\n    get();\n  };\n\n  let change_select_year = event => {\n    setChange_nor(change_nor + 1);\n    setDefaul(defaults + 1);\n\n    let res = async () => {\n      try {\n        var a = [];\n        a.push(event.target.options[event.target.selectedIndex].getAttribute(\"value\"));\n        get_static_year(a[0]);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    res();\n  };\n\n  let change_select_month = event => {\n    setChange_nor(change_nor + 1);\n    setDefaul(defaults + 1);\n    var value = document.getElementById('change_static_year').value;\n\n    let res = async () => {\n      try {\n        var a = 0;\n        a = event.target.options[event.target.selectedIndex].getAttribute(\"value\");\n\n        if (a >= 10) {\n          get_static_year(`${value}-${a}`);\n        } else {\n          get_static_year(`${value}-${0}${a}`);\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    res();\n  };\n\n  var c = 0;\n\n  let change_select_precious = event => {\n    setChange_precious(change_precious + 1);\n    chartData_precious.splice(0, 99);\n    setDefaul(defaults + 1);\n    var value = document.getElementById('change_static_precious').value;\n\n    let res = async () => {\n      try {\n        var a = event.target.options[event.target.selectedIndex].getAttribute(\"value\");\n\n        if (a == 1) {\n          for (let i = 1; i <= 3; i++) {\n            get_static_year(`${a}-${0}${i}`);\n          }\n        } else if (a == 2) {\n          for (let i = 4; i <= 6; i++) {\n            get_static_year(`${value}-${0}${i}`);\n          }\n        } else if (a == 3) {\n          for (let i = 7; i <= 9; i++) {\n            get_static_year(`${value}-${0}${i}`);\n          }\n        } else if (a == 4) {\n          for (let i = 10; i <= 12; i++) {\n            get_static_year(`${value}-${i}`);\n          }\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    res();\n  };\n\n  const onclick_year = () => {\n    setChange_nor(change_nor + 1);\n    setDefaul(defaults + 1);\n    chartData_precious.splice(0, 99);\n    var a = new Date().getFullYear();\n    get_static_year(a);\n    console.log(year);\n  };\n\n  const onclick_month = () => {\n    setDefaul(defaults + 1);\n    chartData_precious.splice(0, 99);\n    setChange_nor(change_nor + 1);\n    var date = new Date();\n    var a = date.getFullYear();\n    var b = date.getMonth() + 1;\n    get_static_year(`${a}-${b}`);\n  };\n\n  const onclick_precious = () => {\n    setChange_precious(change_precious + 1);\n    setDefaul(defaults + 1);\n    var date = new Date();\n    var a = new Date().getFullYear();\n    var b = date.getMonth() + 1; // var b = 11\n\n    chartData_precious.splice(0, 99);\n\n    if (b <= 3) {\n      for (let i = 1; i <= 3; i++) {\n        get_static_year(`${a}-${0}${i}`);\n      }\n    } else if (b <= 6 && b > 3) {\n      for (let i = 4; i <= 6; i++) {\n        get_static_year(`${a}-${0}${i}`);\n      }\n    } else if (b <= 9 && b > 6) {\n      for (let i = 7; i <= 9; i++) {\n        get_static_year(`${a}-${0}${i}`);\n      }\n    } else if (b <= 12 && b > 9) {\n      for (let i = 10; i <= 12; i++) {\n        get_static_year(`${a}-${i}`);\n      }\n    }\n  };\n\n  var a = 0;\n  var b = 0;\n\n  if (list_booking !== null && list_booking !== undefined) {\n    if (chartData_precious !== '' && chartData_year !== undefined && change_precious !== 1) {\n      c = 0;\n      a = 0; // console.log(c,a)\n\n      console.log(chartData_precious);\n\n      for (let i = 0; i < chartData_precious.length; i++) {\n        for (let j = 0; j < chartData_precious[i].length; j++) {\n          // console.log(chartData_precious[i][j].total)\n          a += chartData_precious[i][j].total;\n          c += chartData_precious[i].length;\n          b = c;\n        }\n      }\n    } else if (chartData_year !== '' && chartData_year !== undefined && change_nor !== 1) {\n      for (let i = 0; i < chartData_year.length; i++) {\n        a += chartData_year[i];\n        b = count_ticket;\n      }\n    } else if (chartData_year !== '' && chartData_year !== undefined && defaults < 1) {\n      for (let i = 0; i < chartData_year.length; i++) {\n        a += chartData_year[i];\n        b = count_ticket;\n      }\n    }\n  }\n\n  if (list_booking !== null && list_booking !== undefined && a !== '') {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart_section py-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container py-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"heading_static text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Monthly Statistics\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: a\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: b\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: onclick_year,\n              children: \"th\\u1ED1ng k\\xEA n\\u0103m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: onclick_month,\n              children: \"th\\u1ED1ng k\\xEA month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: onclick_precious,\n              children: \"th\\u1ED1ng k\\xEA precious\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"\",\n              onChange: change_select_year,\n              children: year.map((u, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: `${u}`,\n                children: u\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 40\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"static_month\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"change_static_year\",\n                className: \"change_static_year\",\n                children: year.map((u, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  selected: true,\n                  value: `${u}`,\n                  children: u\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 44\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"change_static_month\",\n                onChange: change_select_month,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\"\n                }, \"\", false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this), month.map((u, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: `${u}`,\n                  children: u\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 45\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"static_precious\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"change_static_precious\",\n                className: \"change_static_precious\",\n                children: year.map((u, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  selected: true,\n                  value: `${u}`,\n                  children: u\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 44\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"change_static_precious\",\n                onChange: change_select_precious,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\"\n                }, \"\", false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 21\n                }, this), precious.map((u, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: `${u}`,\n                  children: `Quý ${u}`\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 48\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart p-5\",\n              children: /*#__PURE__*/_jsxDEV(Doughnut, {\n                className: \"chartjs p-2\",\n                data: {\n                  labels: ['Income', 'Ticket'],\n                  datasets: [{\n                    label: 'My First Dataset',\n                    data: [`${a}`, `${b}`],\n                    backgroundColor: ['rgb(255, 99, 132)', 'rgb(54, 162, 235)'],\n                    hoverBorderWidth: 3,\n                    hoverBorderColor: 'gray'\n                  }]\n                },\n                options: {\n                  plugins: {\n                    title: {\n                      display: true,\n                      text: 'Monthly Statistics',\n                      position: 'right',\n                      fontSize: 1000\n                    },\n                    legend: {\n                      display: true,\n                      position: 'bottom'\n                    }\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 1\n      }, this)\n    }, void 0, false);\n  }\n}\n\n_s(ChartJS, \"dXycjx13HqHdUUcqdo1MFTmlQ3s=\");\n\n_c = ChartJS;\n\nfunction count(obj) {\n  var b = 0;\n  return obj.total;\n} // export default class Home extends React.Component {\n//     constructor() {\n//         super()\n//         this.state = {\n//             'tours': [],\n//             'count': 0,\n//             'user': []\n//         }\n//     }\n//     componentDidMount() {\n//         this.loadTours();\n//         this.loadUser();\n//     }\n//     componentDidUpdate() {\n//         this.loadTours(this.props.location.search)\n//     }\n//     loadTours = (page = \"?page=1\") => {\n//         API.get(`${endpoints['tours']}${page}`).then(res => {\n//             this.setState({\n//                 'tours': res.data.results,\n//                 'count': res.data.count\n//             })\n//         })\n//     }\n//     loadUser = () =>{\n//         var a =  API.get(endpoints['current-user'],{\n//             headers:{\n//                 'Authorization': `Bearer ${cookies.load('access_token')}`\n//             }\n//         }).then(res=>{\n//             console.log(res.data.is_superuser)\n//             if(res.data.is_superuser){\n//                 this.loadTours()\n//             }\n//         })\n//     }\n//     render() {\n//         if (!window.location.hash) {\n//             window.location = window.location + '#home';\n//             window.location.reload();\n//         }\n//         return ( <>\n//    </>\n//         )\n//     }\n// }\n\n\nvar _c;\n\n$RefreshReg$(_c, \"ChartJS\");","map":{"version":3,"sources":["C:/Users/Admin/Tours-app/src/Components/Static.js"],"names":["useEffect","useState","Doughnut","cookie","API","endpoints","$","ChartJS","list_booking","setList_booking","chartData_year","setCharData_year","count_ticket","setCount_ticket","change_nor","setChange_nor","change_precious","setChange_precious","count_ticket_precious","setCount_ticket_precious","defaults","setDefaul","chartData_precious","setCharData_precious","year","setYear","month","setMonth","precious","setPrecious","get_all_booking","res","get","headers","load","data","results","date","Date","getFullYear","ele","month_resent","getMonth","i","push","splice","get_static_year","def","post","map","u","index","count","length","change_select_year","event","a","target","options","selectedIndex","getAttribute","err","console","error","change_select_month","value","document","getElementById","c","change_select_precious","onclick_year","log","onclick_month","b","onclick_precious","undefined","j","total","labels","datasets","label","backgroundColor","hoverBorderWidth","hoverBorderColor","plugins","title","display","text","position","fontSize","legend","obj"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Doughnut } from 'react-chartjs-2';\r\nimport cookie  from 'react-cookies'\r\nimport API, { endpoints } from '../Configs/API';\r\nimport $ from 'jquery'\r\n\r\n\r\nexport default function ChartJS (){\r\n\r\n    const [list_booking , setList_booking] = useState([])\r\n\r\n    const [chartData_year , setCharData_year] = useState([])   \r\n    const [count_ticket , setCount_ticket] = useState(0)\r\n    const [change_nor,setChange_nor] = useState(1)\r\n    const [change_precious,setChange_precious] = useState(1)\r\n\r\n    const [count_ticket_precious , setCount_ticket_precious] = useState(0)\r\n\r\n    const [defaults , setDefaul ] = useState(0)\r\n\r\n    const [chartData_precious , setCharData_precious] = useState([])   \r\n    const [year , setYear ] = useState([])\r\n    const [month , setMonth] =useState([])\r\n    const [precious , setPrecious] = useState([])\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    useEffect( ()=>{\r\n    \r\n        const get_all_booking = async() =>{\r\n            let res = await API.get(endpoints['all_booking'],{\r\n                headers : {\r\n                    'Authorization' : `Bearer ${cookie.load('access_token')}`\r\n                }\r\n            },[])\r\n            setList_booking(res.data.results)           \r\n        }\r\n        get_all_booking()\r\n        \r\n        var date = new  Date().getFullYear()\r\n        var ele = date - 9\r\n        var month_resent = new Date().getMonth() + 1\r\n        for ( let i = ele ; i <= date ; i ++){\r\n            year.push(i)\r\n        } \r\n        for ( let i = 1 ; i <= 12 ; i ++){\r\n            month.push(i)\r\n        } \r\n        for ( let i = 1 ; i <= 4 ; i ++){\r\n            precious.push(i)\r\n        }  \r\n        year.splice(10 , 99)\r\n        month.splice(10 , 99)\r\n        precious.splice(4 , 99)\r\n        if (defaults == 0 ){\r\n            if (month_resent < 10){\r\n                get_static_year(`${date}-${0}${month_resent}`)\r\n            }else{\r\n                get_static_year(`${date}-${month_resent}`)\r\n            }\r\n        }\r\n        \r\n    },[change_precious,change_nor,def])\r\n\r\n   \r\n\r\n   \r\n\r\n    const get_static_year =  (date) =>{\r\n        let  get = async ()=>{\r\n            let res = await API.post(endpoints['static_year'],{\r\n                \"date\":date\r\n            },{\r\n                headers : {\r\n                    'Authorization' : `Bearer ${cookie.load('access_token')}`\r\n                }\r\n            },[])\r\n            setCharData_year(res.data.map((u,index)=> count(u)))\r\n            setCount_ticket(res.data.length)\r\n            chartData_precious.push(res.data)\r\n\r\n        }\r\n        get()\r\n    }\r\n\r\n   \r\n\r\n    let change_select_year = (event)=>{\r\n        setChange_nor(change_nor+1)\r\n        setDefaul(defaults+1)\r\n        let res  = async ()=>{\r\n            try {\r\n                var a = []\r\n                a.push(event.target.options[event.target.selectedIndex].getAttribute(\"value\"))\r\n                get_static_year(a[0])\r\n            }catch(err){\r\n                console.error(err)\r\n            }\r\n        }\r\n        res()\r\n      \r\n    } \r\n    \r\n\r\n    let change_select_month = (event)=>{\r\n        setChange_nor(change_nor+1)\r\n        setDefaul(defaults+1)\r\n\r\n        var value =document.getElementById('change_static_year').value\r\n        let res  = async ()=>{\r\n            try {\r\n                var a = 0\r\n                a = (event.target.options[event.target.selectedIndex].getAttribute(\"value\"))\r\n                if (a >= 10 ){\r\n                    get_static_year(`${value}-${a}`)\r\n                }\r\n                else{\r\n                    get_static_year(`${value}-${0}${a}`)\r\n                }\r\n            }catch(err){\r\n                console.error(err)\r\n            }\r\n        }\r\n        res()\r\n      \r\n    }   \r\n    var c = 0\r\n    let change_select_precious = (event)=>{\r\n        setChange_precious(change_precious+1)\r\n        chartData_precious.splice(0,99) \r\n        setDefaul(defaults+1)\r\n\r\n        var value =document.getElementById('change_static_precious').value\r\n        let res  = async ()=>{\r\n            try {\r\n                var a = event.target.options[event.target.selectedIndex].getAttribute(\"value\")       \r\n\r\n                if ( a == 1 ){\r\n                    for(let i = 1 ; i <= 3 ; i ++){\r\n                        get_static_year(`${a}-${0}${i}`)\r\n                    }\r\n                }else if( a == 2 ){\r\n                    for(let i = 4 ; i <= 6 ; i ++){\r\n                        get_static_year(`${value}-${0}${i}`)\r\n                    }   \r\n                }else if( a == 3 ){\r\n                    for(let i = 7 ; i <= 9 ; i ++){\r\n                        get_static_year(`${value}-${0}${i}`)\r\n                    }   \r\n                }else if( a == 4 ){\r\n                    for(let i = 10 ; i <= 12 ; i ++){\r\n                        get_static_year(`${value}-${i}`)\r\n                    }   \r\n                }\r\n            }catch(err){\r\n                console.error(err)\r\n            }\r\n        }\r\n        res()\r\n\r\n    } \r\n    const onclick_year = () =>{\r\n        setChange_nor(change_nor+1)\r\n        setDefaul(defaults+1)\r\n\r\n        chartData_precious.splice(0,99) \r\n        var a = new Date().getFullYear()\r\n        get_static_year(a)\r\n        console.log(year)\r\n    }\r\n    const onclick_month = () =>{\r\n        setDefaul(defaults+1)\r\n\r\n        chartData_precious.splice(0,99) \r\n        setChange_nor(change_nor+1)\r\n        var date = new Date()\r\n        var a = date.getFullYear()\r\n        var b = date.getMonth() + 1\r\n        get_static_year(`${a}-${b}`)\r\n\r\n    }\r\n\r\n    const onclick_precious = () =>{\r\n        setChange_precious(change_precious+1)\r\n        setDefaul(defaults+1)\r\n\r\n        var date = new Date()\r\n        var a = new Date().getFullYear()\r\n        var b = date.getMonth() + 1\r\n        // var b = 11\r\n        chartData_precious.splice(0,99) \r\n        if (b <=3){\r\n            for(let i = 1 ; i <= 3 ; i ++){\r\n                get_static_year(`${a}-${0}${i}`)\r\n            }\r\n            \r\n        }else if ( b<=6 && b > 3 ){\r\n            for(let i = 4 ; i <= 6 ; i ++){\r\n                get_static_year(`${a}-${0}${i}`)\r\n            }\r\n        }else if ( b<=9 && b > 6 ){\r\n            for(let i = 7 ; i <= 9 ; i ++){\r\n                get_static_year(`${a}-${0}${i}`)\r\n            }\r\n        }else if ( b<=12 && b > 9 ){\r\n            for(let i = 10 ; i <= 12 ; i ++){\r\n                get_static_year(`${a}-${i}`)\r\n            }\r\n        }\r\n    }\r\n\r\n    var a = 0 \r\n    var b = 0\r\n    if (list_booking!== null && list_booking !== undefined){\r\n       \r\n        if (chartData_precious !== '' && chartData_year!== undefined && change_precious !== 1 ){\r\n            c = 0\r\n            a = 0\r\n            // console.log(c,a)\r\n            console.log(chartData_precious)\r\n            for (let i = 0 ; i < chartData_precious.length ; i++){\r\n                \r\n                for (let j  = 0 ; j < chartData_precious[i].length ; j ++ ){\r\n                    // console.log(chartData_precious[i][j].total)\r\n                    a += chartData_precious[i][j].total    \r\n                    c += chartData_precious[i].length\r\n                    b = c\r\n                }                 \r\n            }\r\n        }\r\n        else if(chartData_year !== '' && chartData_year!== undefined && change_nor !== 1 ){\r\n          \r\n            for (let i = 0 ; i < chartData_year.length ; i++){\r\n                a += chartData_year[i] \r\n                b = count_ticket               \r\n            }\r\n        }\r\n        else if(chartData_year !== '' && chartData_year!== undefined && defaults < 1 ){\r\n            for (let i = 0 ; i < chartData_year.length ; i++){\r\n                a += chartData_year[i] \r\n                b = count_ticket               \r\n            }\r\n        }\r\n\r\n    }\r\n\r\n   \r\nif (list_booking !==null && list_booking !== undefined && a!== ''){\r\n    return(\r\n<>\r\n<div className=\"chart_section py-5\">\r\n    <div className=\"container py-5\">\r\n        <div className=\"heading_static text-center\">\r\n            <h1>Monthly Statistics</h1>\r\n            <h2>{a}</h2>\r\n            <h2>{b}</h2>\r\n            <button type=\"button\" onClick={onclick_year}>\r\n                thống kê năm\r\n            </button>\r\n            <button type=\"button\" onClick={onclick_month}>\r\n                thống kê month\r\n            </button>\r\n            <button type=\"button\" onClick={onclick_precious}>\r\n                thống kê precious\r\n            </button>\r\n\r\n            <select className=\"\" onChange={change_select_year}>\r\n                {year.map((u,index) => <option  value={`${u}`} key={index}>{u}</option>)}\r\n            </select>\r\n            <div className='static_month'>\r\n                <select id=\"change_static_year\" className='change_static_year'>\r\n                    {year.map((u,index) => <option selected value={`${u}`} key={index}>{u}</option>)}\r\n                </select>\r\n                <select id=\"change_static_month\" onChange={change_select_month} >\r\n                    <option value=\"\" key=\"\"></option>\r\n                    {month.map((u,index) => <option  value={`${u}`} key={index}>{u}</option>)}\r\n                </select>\r\n            </div>\r\n            <div className='static_precious'>\r\n                <select id=\"change_static_precious\" className='change_static_precious'>\r\n                    {year.map((u,index) => <option selected value={`${u}`} key={index}>{u}</option>)}\r\n                </select>\r\n                <select id=\"change_static_precious\" onChange={change_select_precious} >\r\n                    <option value=\"\" key=\"\"></option>\r\n                    {precious.map((u,index) => <option  value={`${u}`}  key={index}>{`Quý ${u}`}</option>)}\r\n                </select>\r\n            </div>\r\n            <div className=\"chart p-5\">\r\n                <Doughnut className='chartjs p-2'\r\n                    data={{ \r\n                        labels: [\r\n                            'Income',\r\n                            'Ticket',\r\n                        ],\r\n                        datasets: [{\r\n                            label: 'My First Dataset',\r\n                            data: [`${a}`, `${b}`],\r\n                            backgroundColor: [\r\n                            'rgb(255, 99, 132)',\r\n                            'rgb(54, 162, 235)',\r\n\r\n                            ],\r\n                            hoverBorderWidth : 3,\r\n                            hoverBorderColor: 'gray'\r\n                        }]\r\n                    }}\r\n                    options = {{\r\n                        plugins: {\r\n                            title: {\r\n                                display: true,\r\n                                text: 'Monthly Statistics',\r\n                                position : 'right',\r\n                                fontSize : 1000\r\n                            },\r\n                            legend : {\r\n                                display : true,\r\n                                position : 'bottom'\r\n                            }\r\n                        }\r\n                    }}\r\n                />\r\n                </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</>\r\n        )\r\n    }   \r\n}\r\nfunction count (obj){\r\n    var b  = 0\r\n\r\n    return obj.total\r\n}\r\n\r\n// export default class Home extends React.Component {\r\n\r\n\r\n//     constructor() {\r\n//         super()\r\n\r\n//         this.state = {\r\n//             'tours': [],\r\n//             'count': 0,\r\n//             'user': []\r\n//         }\r\n//     }\r\n\r\n//     componentDidMount() {\r\n//         this.loadTours();\r\n//         this.loadUser();\r\n//     }\r\n\r\n//     componentDidUpdate() {\r\n//         this.loadTours(this.props.location.search)\r\n//     }\r\n\r\n//     loadTours = (page = \"?page=1\") => {\r\n//         API.get(`${endpoints['tours']}${page}`).then(res => {\r\n//             this.setState({\r\n//                 'tours': res.data.results,\r\n//                 'count': res.data.count\r\n//             })\r\n//         })\r\n//     }\r\n\r\n//     loadUser = () =>{\r\n//         var a =  API.get(endpoints['current-user'],{\r\n//             headers:{\r\n//                 'Authorization': `Bearer ${cookies.load('access_token')}`\r\n//             }\r\n//         }).then(res=>{\r\n//             console.log(res.data.is_superuser)\r\n//             if(res.data.is_superuser){\r\n//                 this.loadTours()\r\n//             }\r\n//         })\r\n//     }\r\n\r\n//     render() {\r\n\r\n//         if (!window.location.hash) {\r\n//             window.location = window.location + '#home';\r\n//             window.location.reload();\r\n//         }\r\n\r\n       \r\n\r\n//         return ( <>\r\n   \r\n//    </>\r\n//         )\r\n//     }\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}